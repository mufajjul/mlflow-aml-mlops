staging:
  needs: build
  name: Deploy to staging
  environment:
      name: staging
      url: ${{ steps.deploy_staging.outputs.webapp-url }}
  runs-on: ubuntu-latest
  steps:
  # Download artifacts
  - name: Download artifacts
    uses: actions/download-artifact@v2
    with:
      name: webapp
 
  # Deploy to App Service Linux
  - name: Deploy to Azure WebApp
    uses: azure/webapps-deploy@v2
    id: deploy_staging
    with:
      app-name: ${{ env.AZURE_WEBAPP_NAME }}
      publish-profile: ${{ secrets.AZURE_PUBLISH_PROFILE }}
      slot-name: staging
